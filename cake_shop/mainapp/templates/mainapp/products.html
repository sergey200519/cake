{% load static %}

{% for product in products %}
    {% if product.category == product_category %}

    <li class="product card">
        <a href="{% url 'mainapp:detail' product.id %}">
        <div class="product__image">
            <div class="product__switch image-switch">
                {% for img in img_products %}
                    {% if img.product == product %}
                        <div class="image-switch__item">
                            <div class="image-switch__img"><img src="{{ img.image.url }}"></div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            <ul class="product__image-pagination image-pagination" aria-hidden="true"></ul>
        </div>
        <div class="list__shift">
            <h3 class="list__Card__name card__item">{{ product.name }}</h3>
        </div>
        </a>
        <div class="list__right__weight">
        <div class="list__reviews flex">
            <div>
            <p class="list__compound card__item">{{ product.ingredients }}</p>
            </div>
            <div class="list__link">
              {% if product.count_reviews == 0 %}
                <p>Нет отзывов</p>
              {% else %}
                <ul class="flex">
                  <li class="list__link__item"><img class="list__star" src="{% static 'img/star.png' %}" alt="#"></li>
                  <li class="list__link__item df"><a class="list__link__rating" href="#">{{ product.rating }}</a></li>
                  <li class="list__link__item"><a class="list__link__reviews" href="#">.</a></li>
                  <li class="list__link__item mt-2"><a class="list__link__reviews"
                      href="/pages/card__one.html#reviews__test">{{ product.count_reviews }} отзывов</a></li>
              </ul>
              {% endif %}
            
            </div>
        </div>
        <p class="list__right__weighttext card__item">Вес товара, г</p>
        <ul class="list__weight__list flex card__item">
            <li class="list__weight__link tabs-nav__btn--active" data-path="one" tabindex="0">400</li>
            <li class="list__weight__link" data-path="two" tabindex="0">600</li>
            <li class="list__weight__link" data-path="three" tabindex="0">800</li>
            <li class="list__weight__link" data-path="four" tabindex="0">1000</li>
            <li class="list__weight__link" data-path="five" tabindex="0">2000</li>
        </ul>
        <div class="flex card__item">
          {% for product_ch in product.products.all %}
            {% if product_ch.weight == 400 %}
              <div class="list__weight__container tabs-item tabs-item--active" data-target="one">
                <div class="card__item">{{ product_ch.price }} руб.</div>
                <div class="list__right__article">
                  <p class="list__right__articletext">Артикул: <span>{{ product_ch.article }}</span></p>
                </div>
              </div>
            {% endif %}
          {% endfor %}

          {% for product_ch in product.products.all %}
            {% if product_ch.weight == 600 %}
              <div class="list__weight__container tabs-item" data-target="two">
                <div class="card__item">{{ product_ch.price }} руб.</div>
                <div class="list__right__article">
                  <p class="list__right__articletext">Артикул: <span>{{ product_ch.article }}</span></p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
          
          {% for product_ch in product.products.all %}
            {% if product_ch.weight == 800 %}
              <div class="list__weight__container tabs-item" data-target="three">
                <div class="card__item">{{ product_ch.price }} руб.</div>
                <div class="list__right__article">
                  <p class="list__right__articletext">Артикул: <span>{{ product_ch.article }}</span></p>
                </div>
              </div>
            {% endif %}
          {% endfor %}

          {% for product_ch in product.products.all %}
            {% if product_ch.weight == 1000 %}
              <div class="list__weight__container tabs-item" data-target="four">
                <div class="card__item">{{ product_ch.price }} руб.</div>
                <div class="list__right__article">
                  <p class="list__right__articletext">Артикул: <span>{{ product_ch.article }}</span></p>
                </div>
              </div>
            {% endif %}
          {% endfor %}

          {% for product_ch in product.products.all %}
            {% if product_ch.weight == 2000 %}
              <div class="list__weight__container tabs-item" data-target="five">
                <div class="card__item">{{ product_ch.price }} руб.</div>
                <div class="list__right__article">
                  <p class="list__right__articletext">Артикул: <span>{{ product_ch.article }}</span></p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
        <div class="list__card__more flex aic card__item">
            <a class="list__more__details" href="{% url 'mainapp:detail' product.id %}">Подробнее</a>
            <svg width="11" class="svg-one" height="18" viewBox="0 0 11 18" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M1.49998 1.00002L9.27815 8.7782L1.49998 16.5564" stroke="#028e15" stroke-width="2" />
            </svg>
        </div>
        <div class="list__button flex">
            <a class="list__righ__button button" data-product-article="" data-product-id="{{ product.id }}" href="#">В корзину</a>
            <a class="list__righ__buttontwo buttontwo" href="">Купить</a>
        </div>
        </div>
    </li>
  {% endif %}
{% endfor %}